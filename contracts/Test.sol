//SPDX-License-Identifier: Unlicense
pragma solidity ^0.8.0;

import "./MutableProxyDeployer2.sol";
import './ERC20_P.sol';

//0x61027C600081600B8239F33461017F573660135733546000526014600CF35B3660401460565760003560E01C8063fa54416114608357806315ac72ca1460A7578063299a7bcc1460B45780638f8fbab414610109576038806102016000396000FD5B3354607E57602035335560003533740100000000000000000000000000000000000000001755005B600080FD5B60043574010000000000000000000000000000000000000000175460005260206000F35B6004355460005260206000F35B600435740100000000000000000000000000000000000000001780543314156101725760243590556024356004357Fb532073b38c83145e3e5135377a08bf9aab55bc0fd7c1179cd4fb995d2a5159c600080A3005B60243580156101655760043574010000000000000000000000000000000000000000175433141561017257600435556024356004357Fcfbf4028add9318bbf716f08c348595afb063b0e9feed1f86d33681a4b3ed4d3600080A3005B6043806102396000396000FD5B603C8061018C6000396000FD5B6039806101C86000396000FD08c379a000000000000000000000000000000000000000000000000000000000000000011743414c4c4552204953204e4f5420544845204f574e455208c379a00000000000000000000000000000000000000000000000000000000000000001144e4f542050415941424c452046554e4354494f4e08c379a000000000000000000000000000000000000000000000000000000000000000011346554e4354494f4e204e4f542045584953545308c379a000000000000000000000000000000000000000000000000000000000000000011E494d504c454d454e544154494f4e2043414e204e4f54204245205a45524f

contract Test is MutableProxyDeployer2{
    function test() external {
        uint256[21] memory codeController;
        address addrController;
        assembly{
            mstore(codeController,0x61027C600081600B8239F33461017F573660135733546000526014600CF35B36)
            mstore(add(codeController,32),0x60401460565760003560E01C8063fa54416114608357806315ac72ca1460A757)
            mstore(add(codeController,64),0x8063299a7bcc1460B45780638f8fbab414610109576038806102016000396000)
            mstore(add(codeController,96),0xFD5B3354607E5760203533556000353374010000000000000000000000000000)
            mstore(add(codeController,128),0x0000000000001755005B600080FD5B6004357401000000000000000000000000)
            mstore(add(codeController,160),0x0000000000000000175460005260206000F35B6004355460005260206000F35B)
            mstore(add(codeController,192),0x6004357401000000000000000000000000000000000000000017805433141561)
            mstore(add(codeController,224),0x01725760243590556024356004357Fb532073b38c83145e3e5135377a08bf9aa)
            mstore(add(codeController,256),0xb55bc0fd7c1179cd4fb995d2a5159c600080A3005B6024358015610165576004)
            mstore(add(codeController,288),0x3574010000000000000000000000000000000000000000175433141561017257)
            mstore(add(codeController,320),0x600435556024356004357Fcfbf4028add9318bbf716f08c348595afb063b0e9f)
            mstore(add(codeController,352),0xeed1f86d33681a4b3ed4d3600080A3005B6043806102396000396000FD5B603C)
            mstore(add(codeController,384),0x8061018C6000396000FD5B6039806101C86000396000FD08c379a00000000000)
            mstore(add(codeController,416),0x0000000000000000000000000000000000000000000000000000011743414c4c)
            mstore(add(codeController,448),0x4552204953204e4f5420544845204f574e455208c379a0000000000000000000)
            mstore(add(codeController,480),0x0000000000000000000000000000000000000000000001144e4f542050415941)
            mstore(add(codeController,512),0x424c452046554e4354494f4e08c379a000000000000000000000000000000000)
            mstore(add(codeController,544),0x000000000000000000000000000000011346554e4354494f4e204e4f54204558)
            mstore(add(codeController,576),0x4953545308c379a0000000000000000000000000000000000000000000000000)
            mstore(add(codeController,608),0x00000000000000011E494d504c454d454e544154494f4e2043414e204e4f5420)
            mstore(add(codeController,640),0x4245205a45524f00000000000000000000000000000000000000000000000000)
            addrController := create(0,codeController,647)
        }

        require(addrController!=address(0),'ERROR IN CREATION OF CONTROLLER');

        ERC20_P imp = new ERC20_P();

        address pr = deployProxy(addrController, address(this), address(imp));

        ERC20_P(pr).init();
        
        ERC20_P(pr).mint(address(1), 1000);

        require(ERC20_P(pr).balanceOf(address(1))==1000, "ERROR");
    }
}